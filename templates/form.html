<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Builder</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">


    <script>
        function call_resume_builder() {
            alert('I am called');
            let btnGenerateResume = document.getElementById('btnGenerateResume');
            btnGenerateResume.value = "Generating resume.  Please wait...";

            let params = [
                encodeURIComponent(document.forms[0]['name'].value || 'blank'),
                encodeURIComponent(document.forms[0]['dob'].value || 'blank'),
                encodeURIComponent(document.forms[0]['phone'].value || 'blank'),
                encodeURIComponent(document.forms[0]['email'].value || 'blank'),
                encodeURIComponent(document.forms[0]['education_1'].value) || 'blank',
                encodeURIComponent(document.forms[0]['education_1_completion_year'].value || 'blank'),
                encodeURIComponent(document.forms[0]['education_1_school'].value || 'blank'),
                encodeURIComponent(document.forms[0]['prof_exp_1'].value || 'blank'),
                encodeURIComponent(document.forms[0]['role_prof_exp_1'].value || 'blank'),
                encodeURIComponent(document.forms[0]['company_prof_exp_1'].value || 'blank'),
                encodeURIComponent(document.forms[0]['worked_from_prof_exp_1'].value || 'blank'),
                encodeURIComponent(document.forms[0]['worked_till_prof_exp_1'].value || 'blank'),
                encodeURIComponent(document.forms[0]['expertise'].value || 'blank'),
                encodeURIComponent(document.forms[0]['apply_for_position'].value || 'blank'),
                encodeURIComponent(document.forms[0]['hobby'].value || 'blank')
            ]


            //fetch(`/generate_resume/${name}/${dob}/${phone}/${email}/${education_1}/${education_1_completion_year}/${education_1_school}/${prof_exp_1}/${role_prof_exp_1}/${company_prof_exp_1}/${worked_from_prof_exp_1}/${worked_till_prof_exp_1}/${expertise}/${apply_for_position}/${hobby}`)
            // Construct the URL with encoded parameters
            let url = "/generate_resume/" + params.join('/');
            // let url = "/test/a/b"
            
            fetch(url)
                .then(response => response.text())
                .then(html => {
                    // Display the HTML content in the 'content' div
                    tab = window.open('about:blank', '_blank');
                    tab.document.write(html);

                    btnGenerateResume.value = "Generate Resume Again";
                })
                .catch(error => console.error('Error fetching data:', error));

        }
    </script>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <div class="container">
        <h1>Resume Builder</h1>

        <form method="POST" class="row g-3">
            <div class="col-md-6">
                <label for="name" class="form-label">Name:</label>
                <input type="text" class="form-control" id="name" name="name">
            </div>

            <div class="col-md-6">
                <label for="dob" class="form-label">Date of Birth:</label>
                <input type="date" class="form-control" id="dob" name="dob">
            </div>

            <div class="col-md-6">
                <label for="phone" class="form-label">Phone Number:</label>
                <input type="tel" class="form-control" id="phone" name="phone">
            </div>

            <div class="col-md-6">
                <label for="email" class="form-label">Email:</label>
                <input type="email" class="form-control" id="email" name="email">
            </div>

            <div>
                <h3>Education 1</h3>
                <div class="col-md-4">
                    <label for="education_1" class="form-label">Education:</label>
                    <input type="text" class="form-control" id="education_1" name="education_1">
                </div>

                <div class="col-md-4">
                    <label for="education_1_school" class="form-label">School or University:</label>
                    <input type="text" class="form-control" id="education_1_school" name="education_1_school">
                </div>

                <div class="col-md-4">
                    <label for="education_1_completion_year" class="form-label">Completion Year:</label>
                    <input type="text" class="form-control" id="education_1_completion_year"
                        name="education_1_completion_year">
                </div>

            </div>

            <!-- Education 2 and Education 3 fields follow a similar structure -->

            <div>
                <h3>Professional Experience 1</h3>
                <div class="col-md-4">
                    <label for="company_prof_exp_1" class="form-label">Company:</label>
                    <input type="text" class="form-control" id="company_prof_exp_1" name="company_prof_exp_1">
                </div>
                <div class="col-md-4">
                    <label for="prof_exp_1" class="form-label">Professional Experience</label>
                    <input type="text" class="form-control" id="prof_exp_1" name="prof_exp_1">
                </div>

                <div class="col-md-4">
                    <label for="role_prof_exp_1" class="form-label">Role:</label>
                    <input type="text" class="form-control" id="role_prof_exp_1" name="role_prof_exp_1">
                </div>
                <div class="col-md-2">
                    <label for="worked_from_prof_exp_1" class="form-label">Worked From:</label>
                    <input type="date" class="form-control" id="worked_from_prof_exp_1" name="worked_from_prof_exp_1">
                </div>
                <div class="col-md-2">
                    <label for="worked_till_prof_exp_1" class="form-label">Worked Till:</label>
                    <input type="date" class="form-control" id="worked_till_prof_exp_1" name="worked_till_prof_exp_1">
                </div>
            </div>

            <div class="col-md-6">
                <label for="expertise" class="form-label">Expertise:</label>
                <textarea class="form-control" id="expertise" name="expertise"></textarea>
            </div>

            <div class="col-md-6">
                <label for="apply_for_position" class="form-label">Apply for Position:</label>
                <input type="text" class="form-control" id="apply_for_position" name="apply_for_position">
            </div>

            <div class="col-md-6">
                <label for="hobby" class="form-label">Hobby:</label>
                <input type="text" class="form-control" id="hobby" name="hobby">
            </div>

<!--             <div>
                <input type="submit" class="btn btn-primary w-25 p-3" value="Submit">
            </div> -->
            <div>
                <input type="button" id="btnGenerateResume" class="btn btn-primary" value="Generate Resume"
                    onclick="call_resume_builder()" />
            </div>
        </form>
    </div>


</body>

</html>